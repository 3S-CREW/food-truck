spring:
  config:
    activate:
      on-profile: dev

  application:
    name: FoodTruckBe

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    # [변경] localhost -> mysql (컨테이너명), 포트 3306, DB명 foodtruck_db
    url: jdbc:mysql://mysql:3306/foodtruck_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: root
    password: ${DB_PASSWORD} # .env 파일에서 주입됨

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect

  # Redis 설정 (도커 컨테이너 연결)
  data:
    redis:
      host: redis # docker-compose 서비스명
      port: 6379

  # 한글 깨짐 방지
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

  # AWS S3 (환경변수 처리 필수)
  cloud:
    aws:
      s3:
        bucket: ${S3_BUCKET_NAME}
      credentials:
        access-key: ${AWS_ACCESS_KEY}
        secret-key: ${AWS_SECRET_KEY}
      region:
        static: ap-northeast-2
      stack:
        auto: false

toss:
  cert:
    path: "classpath:toss_cert.p12" # resources 폴더 내 파일명
    password: ${TOSS_CERT_PASSWORD}  # 인증서 비밀번호
    type: "PKCS12"                  # 파일 확장자가 .p12면 PKCS12
  url:
    token: "https://api.toss.im/api-partner/v1/apps-in-toss/user/oauth2/generate-token"
    profile: "https://api.toss.im/api-partner/v1/apps-in-toss/user/oauth2/login-me"

logging:
  level:
    org.hibernate.SQL: debug

# JWT
jwt:
  secret: ${JWT_SECRET_KEY} # 환경변수 처리
  token-validity-in-seconds: 3600